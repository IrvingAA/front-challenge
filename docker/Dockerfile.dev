FROM node:22-alpine
WORKDIR /app
ENV NODE_ENV=development
COPY package.json package-lock.json* ./
# Install deps but ignore lifecycle scripts so the image build doesn't fail before source is present
RUN if [ -f package-lock.json ]; then npm ci --ignore-scripts; else npm install --ignore-scripts; fi
COPY . .
# Run postinstall to prepare Quasar tooling
RUN npm run postinstall || true

EXPOSE 5173
CMD ["sh", "-c", "npx quasar dev -p 5173 --hostname 0.0.0.0"]
